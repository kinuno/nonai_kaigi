<%= render "shared/header" %>
<div class = "main">
  <div class = "side-bar">
    <h1><%= @room.name %>コメント一覧ページ</h1>

    <li><%= link_to "Room編集", edit_room_path(@room.id), class:"room-edit" %></li>

    <li><%= link_to "Room削除", room_path(@room.id), method: :delete, class:"room-destroy" %></li>

    <div class='character-contents'>
          <h2 class='title'>Character一覧</h2>
          <ul class='character-lists'>
            <% @characters.each do |character|%>
              <li class='list'>
                <%= link_to room_character_path(@room.id, character.id) do %> 
                <div class='character-name'>
                      <%= character.name %>
                </div>
                <% end %> 
              </li>
            <% end %>
          </ul>
      </div>

    <li><%= link_to "Character新規作成", new_room_character_path(@room.id), class:"character-new" %></li>
  </div>

  <%# コメント画面 %>
  <div class = "main-chat">
    
    <h2>Comment画面（画面右側に）</h2>

    <%# コメント一覧 %>
    <div class = "comments">
      <p>コメント一覧</p>
      <% @comments.each do |comment|%>
        <div><%= comment.character.name%> : <%= comment.text%></div>
        <li><%= link_to '削除', room_comment_path(@room.id, comment.id), method: :delete %></li>
      <% end %>
    </div>


    <%# コメントフォーム %>
    <div class = "comment-form"> 
      <p>新規コメント</p> 
      <%= form_with model: [@room, @comment], class: 'form', local: true do |f| %>
        <%= render 'shared/error_messages', model: f.object %>
        <div class="select-character">
          <%= f.label :character_id, 'character'%>
          <%= f.collection_select(:character_id, @characters, :id, :name, {include_blank: true}, {class:"select-box", id:"comment-character"}) %> 
        </div> 
        <div class="form-input">
          <%= f.text_field :text, class: 'form-comment', placeholder: 'type a comment' %>
        </div>
        <%= f.submit '送信', class: 'form-submit' %>
      <% end %>
      </div>

  </div>
</div>

<%= render "shared/footer" %>
